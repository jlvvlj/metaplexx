{"ast":null,"code":"import { IdlCoder } from \"./idl\";\n/**\n * Encodes and decodes user defined types.\n */\n\nexport class TypesCoder {\n  constructor(idl) {\n    if (idl.types === undefined) {\n      this.layouts = new Map();\n      return;\n    }\n\n    const layouts = idl.types.map(acc => {\n      return [acc.name, IdlCoder.typeDefLayout(acc, idl.types)];\n    }); // @ts-ignore\n\n    this.layouts = new Map(layouts);\n  }\n\n  encode(accountName, account) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n\n    const layout = this.layouts.get(accountName);\n    const len = layout.encode(account, buffer);\n    return buffer.slice(0, len);\n  }\n\n  decode(accountName, ix) {\n    const layout = this.layouts.get(accountName);\n    return layout.decode(ix);\n  }\n\n}","map":{"version":3,"mappings":"AAEA,SAASA,QAAT,QAAyB,OAAzB;AAEA;;;;AAGA,OAAM,MAAOC,UAAP,CAAiB;AAMrBC,cAAmBC,GAAnB,EAA2B;AACzB,QAAIA,GAAG,CAACC,KAAJ,KAAcC,SAAlB,EAA6B;AAC3B,WAAKC,OAAL,GAAe,IAAIC,GAAJ,EAAf;AACA;AACD;;AACD,UAAMD,OAAO,GAAGH,GAAG,CAACC,KAAJ,CAAUI,GAAV,CAAeC,GAAD,IAAQ;AACpC,aAAO,CAACA,GAAG,CAACC,IAAL,EAAWV,QAAQ,CAACW,aAAT,CAAuBF,GAAvB,EAA4BN,GAAG,CAACC,KAAhC,CAAX,CAAP;AACD,KAFe,CAAhB,CALyB,CASzB;;AACA,SAAKE,OAAL,GAAe,IAAIC,GAAJ,CAAQD,OAAR,CAAf;AACD;;AAEMM,QAAM,CAAUC,WAAV,EAA+BC,OAA/B,EAAyC;AACpD,UAAMC,MAAM,GAAGC,MAAM,CAACC,KAAP,CAAa,IAAb,CAAf,CADoD,CACjB;;AACnC,UAAMC,MAAM,GAAG,KAAKZ,OAAL,CAAaa,GAAb,CAAiBN,WAAjB,CAAf;AACA,UAAMO,GAAG,GAAGF,MAAM,CAACN,MAAP,CAAcE,OAAd,EAAuBC,MAAvB,CAAZ;AACA,WAAOA,MAAM,CAACM,KAAP,CAAa,CAAb,EAAgBD,GAAhB,CAAP;AACD;;AAEME,QAAM,CAAUT,WAAV,EAA+BU,EAA/B,EAAyC;AACpD,UAAML,MAAM,GAAG,KAAKZ,OAAL,CAAaa,GAAb,CAAiBN,WAAjB,CAAf;AACA,WAAOK,MAAM,CAACI,MAAP,CAAcC,EAAd,CAAP;AACD;;AA7BoB","names":["IdlCoder","TypesCoder","constructor","idl","types","undefined","layouts","Map","map","acc","name","typeDefLayout","encode","accountName","account","buffer","Buffer","alloc","layout","get","len","slice","decode","ix"],"sourceRoot":"","sources":["../../../src/coder/types.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}